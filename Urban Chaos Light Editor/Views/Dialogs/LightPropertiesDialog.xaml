<Window x:Class="UrbanChaosLightEditor.Views.Dialogs.LightPropertiesDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Light Map Properties"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        MinWidth="540" MinHeight="520"
        ResizeMode="NoResize"
        Background="#FF0E0F12"
        Foreground="White">

    <Window.Resources>
        <!-- Custom checkbox with white tick + white label -->
        <Style x:Key="WhiteTickCheckBox" TargetType="CheckBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal">
                            <Border Width="16" Height="16"
                                    Background="Black"
                                    BorderBrush="White"
                                    BorderThickness="1"
                                    VerticalAlignment="Center">
                                <Path x:Name="CheckMark"
                                      Data="M0,4 L2,6 6,0"
                                      Stroke="White"
                                      StrokeThickness="2"
                                      Visibility="Collapsed"
                                      SnapsToDevicePixels="True"
                                      Margin="4,3,0,0"/>
                            </Border>
                            <ContentPresenter Margin="6,0,0,0"
                                              VerticalAlignment="Center"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="CheckMark" Property="Opacity" Value="0.6"/>
                                <Setter Property="Foreground" Value="#6FFFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- GroupBox styling -->
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="0,8,0,8"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="BorderBrush" Value="#555"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HeaderTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Border Background="#2A2A2A"
                                BorderBrush="#555"
                                BorderThickness="0,0,0,1"
                                Padding="8,4"
                                Margin="-6,-6,-6,6">
                            <TextBlock Text="{Binding}" Foreground="White" FontWeight="Bold"/>
                        </Border>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Default text colors on dark -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style TargetType="Label">
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#1E1E1E"/>
            <Setter Property="BorderBrush" Value="#555"/>
        </Style>

        <Style TargetType="Slider">
            <Setter Property="Margin" Value="8,2,8,2"/>
        </Style>

        <Style TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#2A2A2A"/>
            <Setter Property="BorderBrush" Value="#555"/>
        </Style>
    </Window.Resources>

    <DockPanel Margin="12">

        <!-- Buttons -->
        <StackPanel DockPanel.Dock="Bottom"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,12,0,0">
            <Button x:Name="BtnOK"
                    Width="90" Height="28"
                    Margin="0,0,8,0"
                    IsDefault="True"
                    Content="OK"
                    Click="OK_Click"/>
            <Button x:Name="BtnCancel"
                    Width="90" Height="28"
                    IsCancel="True"
                    Content="Cancel"
                    Click="Cancel_Click"/>
        </StackPanel>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical">

                <!-- Night Flags -->
                <GroupBox Header="Night Flags" Margin="0,6,0,10">
                    <StackPanel Orientation="Vertical" Margin="8,4,8,6">

                        <!-- This one is used by your code-behind (NightFlag bit 0) -->
                        <CheckBox x:Name="ChkNightEnabled"
                                  Style="{StaticResource WhiteTickCheckBox}"
                                  Content="Night Enabled"
                                  Margin="0,0,0,8"/>

                        <!-- These can remain VM-bound if you use them elsewhere -->
                        <WrapPanel>
                            <CheckBox Style="{StaticResource WhiteTickCheckBox}"
                                      Content="Lamps On"
                                      Margin="0,0,16,0"
                                      IsChecked="{Binding FlagLampsOn, Mode=TwoWay}"/>

                            <CheckBox Style="{StaticResource WhiteTickCheckBox}"
                                      Content="Darken Walls"
                                      Margin="0,0,16,0"
                                      IsChecked="{Binding FlagDarkenWalls, Mode=TwoWay}"/>

                            <CheckBox Style="{StaticResource WhiteTickCheckBox}"
                                      Content="Day"
                                      IsChecked="{Binding FlagDay, Mode=TwoWay}"/>
                        </WrapPanel>
                    </StackPanel>
                </GroupBox>

                <TextBlock Margin="0,6,0,0"
                           Foreground="#99FFFFFF"
                           FontStyle="Italic"
                           FontSize="11"
                           Text="{Binding FlagsDebug}"/>

                <!-- D3D + Specular -->
                <GroupBox Header="D3D and Specular Color" Padding="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="110"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>

                        <!-- D3D Alpha -->
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="D3D Alpha" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderD3DAlpha"
                                Grid.Row="0" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnD3DChanged"/>
                        <TextBlock Grid.Row="0" Grid.Column="2"
                                   Text="{Binding ElementName=SliderD3DAlpha, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <!-- Specular Alpha -->
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Specular Alpha" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderSpecAlpha"
                                Grid.Row="1" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnD3DChanged"/>
                        <TextBlock Grid.Row="1" Grid.Column="2"
                                   Text="{Binding ElementName=SliderSpecAlpha, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <!-- D3D RGB -->
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="D3D R" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderD3DRed"
                                Grid.Row="3" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnD3DChanged"/>
                        <TextBlock Grid.Row="3" Grid.Column="2"
                                   Text="{Binding ElementName=SliderD3DRed, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="4" Grid.Column="0" Text="D3D G" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderD3DGreen"
                                Grid.Row="4" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnD3DChanged"/>
                        <TextBlock Grid.Row="4" Grid.Column="2"
                                   Text="{Binding ElementName=SliderD3DGreen, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="5" Grid.Column="0" Text="D3D B" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderD3DBlue"
                                Grid.Row="5" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnD3DChanged"/>
                        <TextBlock Grid.Row="5" Grid.Column="2"
                                   Text="{Binding ElementName=SliderD3DBlue, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <!-- Specular RGB -->
                        <TextBlock Grid.Row="7" Grid.Column="0" Text="Spec R" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderSpecRed"
                                Grid.Row="7" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnD3DChanged"/>
                        <TextBlock Grid.Row="7" Grid.Column="2"
                                   Text="{Binding ElementName=SliderSpecRed, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="8" Grid.Column="0" Text="Spec G" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderSpecGreen"
                                Grid.Row="8" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnD3DChanged"/>
                        <TextBlock Grid.Row="8" Grid.Column="2"
                                   Text="{Binding ElementName=SliderSpecGreen, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="9" Grid.Column="0" Text="Spec B" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderSpecBlue"
                                Grid.Row="9" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnD3DChanged"/>
                        <TextBlock Grid.Row="9" Grid.Column="2"
                                   Text="{Binding ElementName=SliderSpecBlue, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <!-- Previews (names match code-behind) -->
                        <StackPanel Grid.Row="11" Grid.ColumnSpan="3" Orientation="Vertical" Margin="0,6,0,0">
                            <Rectangle x:Name="D3DPreview" Height="16" RadiusX="2" RadiusY="2" />
                            <Rectangle x:Name="SpecPreview" Height="16" RadiusX="2" RadiusY="2" Margin="0,6,0,0"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>

                <!-- Night Ambient -->
                <GroupBox Header="Night Ambient (RGB)" Padding="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="R" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderAmbRed"
                                Grid.Row="0" Grid.Column="1"
                                Minimum="-127" Maximum="127"
                                ValueChanged="OnAmbientChanged"/>
                        <TextBlock Grid.Row="0" Grid.Column="2"
                                   Text="{Binding ElementName=SliderAmbRed, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="G" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderAmbGreen"
                                Grid.Row="1" Grid.Column="1"
                                Minimum="-127" Maximum="127"
                                ValueChanged="OnAmbientChanged"/>
                        <TextBlock Grid.Row="1" Grid.Column="2"
                                   Text="{Binding ElementName=SliderAmbGreen, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="B" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderAmbBlue"
                                Grid.Row="2" Grid.Column="1"
                                Minimum="-127" Maximum="127"
                                ValueChanged="OnAmbientChanged"/>
                        <TextBlock Grid.Row="2" Grid.Column="2"
                                   Text="{Binding ElementName=SliderAmbBlue, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <Rectangle x:Name="AmbientPreview"
                                   Grid.Row="4" Grid.ColumnSpan="3"
                                   Height="16" RadiusX="2" RadiusY="2"/>
                    </Grid>
                </GroupBox>

                <!-- Light Emitting Prim Color + Radius -->
                <GroupBox Header="Light Emitting Prim Color" Padding="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="R" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderLampRed"
                                Grid.Row="0" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnLampChanged"/>
                        <TextBlock Grid.Row="0" Grid.Column="2"
                                   Text="{Binding ElementName=SliderLampRed, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="G" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderLampGreen"
                                Grid.Row="1" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnLampChanged"/>
                        <TextBlock Grid.Row="1" Grid.Column="2"
                                   Text="{Binding ElementName=SliderLampGreen, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="B" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderLampBlue"
                                Grid.Row="2" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnLampChanged"/>
                        <TextBlock Grid.Row="2" Grid.Column="2"
                                   Text="{Binding ElementName=SliderLampBlue, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="4" Grid.Column="0" Text="Radius" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderLampRadius"
                                Grid.Row="4" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnLampChanged"/>
                        <TextBlock Grid.Row="4" Grid.Column="2"
                                   Text="{Binding ElementName=SliderLampRadius, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <Rectangle x:Name="LampPreview"
                                   Grid.Row="6" Grid.ColumnSpan="3"
                                   Height="16" RadiusX="2" RadiusY="2"/>
                    </Grid>
                </GroupBox>

                <!-- Night Sky Colour -->
                <GroupBox Header="Night Sky Colour" Padding="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="8"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="R" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderSkyRed"
                                Grid.Row="0" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnSkyChanged"/>
                        <TextBlock Grid.Row="0" Grid.Column="2"
                                   Text="{Binding ElementName=SliderSkyRed, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="G" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderSkyGreen"
                                Grid.Row="1" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnSkyChanged"/>
                        <TextBlock Grid.Row="1" Grid.Column="2"
                                   Text="{Binding ElementName=SliderSkyGreen, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="B" VerticalAlignment="Center"/>
                        <Slider x:Name="SliderSkyBlue"
                                Grid.Row="2" Grid.Column="1"
                                Minimum="0" Maximum="255"
                                ValueChanged="OnSkyChanged"/>
                        <TextBlock Grid.Row="2" Grid.Column="2"
                                   Text="{Binding ElementName=SliderSkyBlue, Path=Value, StringFormat=F0}"
                                   VerticalAlignment="Center"/>

                        <Rectangle x:Name="SkyPreview"
                                   Grid.Row="4" Grid.ColumnSpan="3"
                                   Height="16" RadiusX="2" RadiusY="2"/>
                    </Grid>
                </GroupBox>

            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</Window>
