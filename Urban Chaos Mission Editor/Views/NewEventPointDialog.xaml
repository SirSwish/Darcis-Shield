<Window x:Class="UrbanChaosMissionEditor.Views.NewEventPointDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Add New EventPoint" 
        Width="400" Height="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#FF2D2D30">

    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="#FFCCCCCC"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        <Style TargetType="ListBoxItem">
            <Setter Property="Foreground" Value="#FFEEEEEE"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#0078D4"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3E3E42"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,15">
            <TextBlock Text="Select EventPoint Type" FontSize="18" FontWeight="Bold" Foreground="White"/>
            <TextBlock Text="Choose the type of EventPoint to create" FontSize="12" Foreground="#FF888888" Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Search/Filter -->
        <TextBox Grid.Row="1" x:Name="SearchBox" 
                 Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                 Background="#FF3E3E42" Foreground="#FFEEEEEE" BorderBrush="#FF555555"
                 Padding="8,6" Margin="0,0,0,10">
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Setter Property="Background" Value="#FF3E3E42"/>
                    <Setter Property="Foreground" Value="#FFEEEEEE"/>
                    <Setter Property="BorderBrush" Value="#FF555555"/>
                </Style>
            </TextBox.Style>
        </TextBox>

        <!-- Type List -->
        <ListBox Grid.Row="2" 
                 x:Name="TypeListBox"
                 ItemsSource="{Binding FilteredWaypointTypes}"
                 SelectedItem="{Binding SelectedType}"
                 Background="#FF252526" BorderBrush="#FF555555"
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 MouseDoubleClick="TypeListBox_MouseDoubleClick">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding DisplayName}" FontSize="13"/>
                        <TextBlock Text="{Binding Category, StringFormat=' ({0})'}" 
                                   Foreground="#FF888888" FontSize="11" Margin="5,0,0,0"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!-- Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="Create" Width="80" Margin="0,0,10,0" Click="CreateButton_Click" IsDefault="True"
                    IsEnabled="{Binding HasSelection}"
                    Background="#FF0078D4" Foreground="White" BorderThickness="0" Padding="10,5"/>
            <Button Content="Cancel" Width="80" Click="CancelButton_Click" IsCancel="True"
                    Background="#FF555555" Foreground="White" BorderThickness="0" Padding="10,5"/>
        </StackPanel>
    </Grid>
</Window>
